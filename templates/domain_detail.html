{% extends 'base.html' %}

{% block title %}NHS Data Explorer - {{ domain.title }}{% endblock %}

{% block content %}
<div class="breadcrumb">
    <a href="/">Domains</a> &gt; {{ domain.title }}
</div>

<div class="domain-header">
    <h2>{{ domain.title }}</h2>
    <p class="subtitle">{{ domain.description }}</p>
    <button onclick="openAssistant('{{ domain_id }}')" class="btn primary">
        <i class="fas fa-robot"></i> Ask Assistant About This Domain
    </button>
</div>

<div class="domain-details">
    <div class="domain-section">
        <h3>Suggested Questions for Data Scientists</h3>
        
        <div class="question-list">
            {% for question in domain.suggested_questions %}
            <div class="question-card" onclick="copyToChat('{{ question }}')">
                <div class="question-text">{{ question }}</div>
                <div class="question-actions">
                    <button class="btn small" title="Ask this question">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    
    <div class="domain-section">
        <div class="domain-metrics-card">
            <h3>Content</h3>
            <div class="metrics-list">
                {% for metric in domain.key_metrics %}
                <div class="metric-item">
                    <i class="fas fa-book"></i>
                    <span>{{ metric }}</span>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="domain-sources-card">
            <h3>Activities to Try</h3>
            <div class="sources-list">
                {% for source in domain.relevant_data_sources %}
                <div class="source-item">
                    <i class="fas fa-tasks"></i>
                    <span>Go find out what data sources that {{ source }} use</span>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    
    <!-- Domain-specific content ends here -->
</div>

<script>
    // Function to copy question to chat input and open chat modal
    function copyToChat(question) {
        openAssistant('{{ domain_id }}');
        document.getElementById('user-input').value = question;
        // Focus the input field
        setTimeout(() => {
            document.getElementById('user-input').focus();
        }, 100);
    }
</script>
{% endblock %}